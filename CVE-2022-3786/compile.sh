#!/bin/sh

# Change directories into openssl.
cd ./openssl

# Ensure we're on the vulnerable version.
git checkout eec0ad10b943bc10690358cf2db32ca06c3e81a0

# Configure the build for 32-bit, static, and without test (to speed up compilation).
make clean
CC=gcc CXX=g++ CFLAGS="-m32 -Og -g3 -fno-inline-functions -fdump-rtl-expand -fsanitize=address -static-libasan" ./Configure -m32 linux-generic32 no-tests --debug
# Compile the project.
CC=gcc CXX=g++ CFLAGS="-m32 -Og -g3 -fno-inline-functions -fdump-rtl-expand -fsanitize=address -static-libasan" make